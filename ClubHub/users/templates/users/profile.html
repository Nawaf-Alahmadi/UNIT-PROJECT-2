{% extends 'main/base.html' %}

{% block title %} Profile - {{user.username}} {% endblock %}

{% block content%}
<section class="sec profile-sec">
  <div class="container">
    <h2 class="section-header">Profile</h2>
    <div class="personal-info table-style">
      <h3>Personal Info</h3>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Username</th>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Email</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{user.username}}</td>
              <td>{{user.first_name}}</td>
              <td>{{user.last_name}}</td>
              <td>{{user.email}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    {% if not request.user.is_staff %}
    <div class="clubs-sec joined">
      <h3>Joined Clubs</h3>
      {% for user_club in user_clubs %}
      <div class="clubs">
        <div class="club">
          <div class="img"><img src="{{user_club.club.image.url}}" alt=""></div>
          <div class="info">
            <div class="name">Club Name: {{user_club.club.name}}</div>
            <div class="leader">Leader: {{user_club.club.leader}}</div>
          </div>
          <div class="buttons">
            <a href="{% url 'clubs:club_details_view' user_club.club.id %}" class="more">More</a>
            <a href="{% url 'clubs:leave_member_view' user_club.club.id request.user.id %}">Leave</a>

          </div>

        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
      {% if leader_managed_club %}
    <div class="clubs-sec managed">
      <h3>Managed Club</h3>
      <div class="clubs">
        <div class="club">
          <div class="img"><img src="{{leader_managed_club.image.url}}" alt=""></div>
          <div class="info">
            <div class="name">Club Name: {{leader_managed_club.name}}</div>
            <div class="leader">Leader: {{leader_managed_club.leader}}</div>
          </div>
          <div class="buttons">
              {% if request.user.id == leader_managed_club.leader.id  %}  
              <a href="{% url 'clubs:modify_club_view' leader_managed_club.id  %}" class="modify">Modify</a>
              <a href="{% url 'clubs:club_details_view' leader_managed_club.id %}" class="more">More</a>

              {% endif %}
          </div>
        </div>
      </div>
    </div>
      {% endif %}
    {% endif %}

  </div>
</section>
{% endblock %}